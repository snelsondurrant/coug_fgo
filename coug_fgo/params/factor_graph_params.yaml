factor_graph_node:
  # --- Node Settings ---
  publish_global_tf:
    type: bool
    default_value: true
  publish_smoothed_path:
    type: bool
    default_value: false
  publish_velocity:
    type: bool
    default_value: false
  publish_imu_bias:
    type: bool
    default_value: false
  publish_pose_cov:
    type: bool
    default_value: false
  publish_velocity_cov:
    type: bool
    default_value: false
  publish_imu_bias_cov:
    type: bool
    default_value: false
  publish_diagnostics:
    type: bool
    default_value: false
  publish_graph_metrics:
    type: bool
    default_value: false

  # --- GTSAM Settings ---
  solver_type:
    type: string
    default_value: "IncrementalFixedLagSmoother"
  max_keyframe_rate:
    type: double
    default_value: -1.0
  smoother_lag:
    type: double
    default_value: 10.0
  relinearize_threshold:
    type: double
    default_value: 0.1
  relinearize_skip:
    type: int
    default_value: 1

  # --- ROS Topics and Frames ---
  imu_topic:
    type: string
    default_value: "imu/data_raw"
  gps_odom_topic:
    type: string
    default_value: "odometry/gps"
  depth_odom_topic:
    type: string
    default_value: "odometry/depth"
  mag_topic:
    type: string
    default_value: "imu/mag"
  ahrs_topic:
    type: string
    default_value: "imu/ahrs"
  dvl_topic:
    type: string
    default_value: "dvl/twist"
  wrench_topic:
    type: string
    default_value: "cmd_wrench"
  global_odom_topic:
    type: string
    default_value: "odometry/global"
  smoothed_path_topic:
    type: string
    default_value: "smoothed_path"
  graph_metrics_topic:
    type: string
    default_value: "~/metrics"
  velocity_topic:
    type: string
    default_value: "~/velocity"
  imu_bias_topic:
    type: string
    default_value: "~/imu_bias"

  map_frame:
    type: string
    default_value: "map"
  odom_frame:
    type: string
    default_value: "odom"
  base_frame:
    type: string
    default_value: "base_link"

  # --- Sensor Settings ---
  imu:
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "imu_link"
    use_parameter_covariance:
      type: bool
      default_value: false
    parameter_covariance:
      accel_noise_sigmas:
        type: double_array
        default_value: [0.0078, 0.0078, 0.0078]
      gyro_noise_sigmas:
        type: double_array
        default_value: [0.0012, 0.0012, 0.0012]
    accel_bias_rw_sigmas:
      type: double_array
      default_value: [0.000105, 0.000105, 0.000105]
    gyro_bias_rw_sigmas:
      type: double_array
      default_value: [0.0000391, 0.0000391, 0.0000391]
    integration_covariance:
      type: double
      default_value: 0.00001
    gravity:
      type: double_array
      default_value: [0.0, 0.0, -9.8]
    timeout_threshold:
      type: double
      default_value: 1.0

  gps:
    enable_gps:
      type: bool
      default_value: false
    enable_gps_init_only:
      type: bool
      default_value: false
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "gps_link"
    use_parameter_covariance:
      type: bool
      default_value: false
    parameter_covariance:
      position_noise_sigmas:
        type: double_array
        default_value: [0.015, 0.015]
    timeout_threshold:
      type: double
      default_value: 2.0
    robust_kernel:
      type: string
      default_value: "None"
    robust_k:
      type: double
      default_value: 1.345

  depth:
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "depth_link"
    use_parameter_covariance:
      type: bool
      default_value: false
    parameter_covariance:
      position_z_noise_sigma:
        type: double
        default_value: 0.02
    timeout_threshold:
      type: double
      default_value: 1.0
    robust_kernel:
      type: string
      default_value: "None"
    robust_k:
      type: double
      default_value: 1.345

  mag:
    enable_mag:
      type: bool
      default_value: false
    enable_mag_init_only:
      type: bool
      default_value: false
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "mag_link"
    use_parameter_covariance:
      type: bool
      default_value: false
    parameter_covariance:
      magnetic_field_noise_sigmas:
        type: double_array
        default_value: [0.003, 0.003, 0.003]
    reference_field:
      type: double_array
      default_value: [0.07857, 0.41316, -0.90726]
    timeout_threshold:
      type: double
      default_value: 1.0
    robust_kernel:
      type: string
      default_value: "None"
    robust_k:
      type: double
      default_value: 1.345

  ahrs:
    enable_ahrs:
      type: bool
      default_value: false
    enable_ahrs_init_only:
      type: bool
      default_value: false
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "ahrs_link"
    use_parameter_covariance:
      type: bool
      default_value: false
    parameter_covariance:
      yaw_noise_sigma:
        type: double
        default_value: 0.01745
    mag_declination_radians:
      type: double
      default_value: 0.0
    timeout_threshold:
      type: double
      default_value: 0.25
    robust_kernel:
      type: string
      default_value: "None"
    robust_k:
      type: double
      default_value: 1.345

  dvl:
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "dvl_link"
    use_parameter_covariance:
      type: bool
      default_value: false
    parameter_covariance:
      velocity_noise_sigmas:
        type: double_array
        default_value: [0.02, 0.02, 0.02]
    timeout_threshold:
      type: double
      default_value: 1.0
    robust_kernel:
      type: string
      default_value: "None"
    robust_k:
      type: double
      default_value: 1.345

  const_vel:
    enable_const_vel:
      type: bool
      default_value: false
    enable_const_vel_dropout_only:
      type: bool
      default_value: true
    velocity_sigma:
      type: double_array
      default_value: [0.1, 0.1, 0.1]

  dynamics:
    enable_dynamics:
      type: bool
      default_value: false
    enable_dynamics_dropout_only:
      type: bool
      default_value: false
    use_parameter_frame:
      type: bool
      default_value: false
    parameter_frame:
      type: string
      default_value: "com_link"
    prediction_noise_sigmas:
      type: double_array
      default_value: [0.1, 0.1, 0.1]
    mass:
      type: double_array
      default_value: [32.0, 62.0, 62.0]
    linear_drag:
      type: double_array
      default_value: [6.1, 154.0, 154.0]
    quad_drag:
      type: double_array
      default_value: [1.8, 1.8, 1.8]
    timeout_threshold:
      type: double
      default_value: 1.0
    robust_kernel:
      type: string
      default_value: "None"
    robust_k:
      type: double
      default_value: 1.345

  # --- Prior Settings ---
  prior:
    initialization_duration:
      type: double
      default_value: 10.0
    use_parameter_priors:
      type: bool
      default_value: false
    parameter_priors:
      initial_position:
        type: double_array
        default_value: [0.0, 0.0, 0.0]
      initial_orientation:
        type: double_array
        default_value: [0.0, 0.0, 0.0]
      initial_velocity:
        type: double_array
        default_value: [0.0, 0.0, 0.0]
      initial_accel_bias:
        type: double_array
        default_value: [0.0, 0.0, 0.0]
      initial_gyro_bias:
        type: double_array
        default_value: [0.0, 0.0, 0.0]
      initial_position_sigmas:
        type: double_array
        default_value: [0.001, 0.001, 0.001]
      initial_orientation_sigmas:
        type: double_array
        default_value: [0.001, 0.001, 0.001]
      initial_velocity_sigmas:
        type: double_array
        default_value: [0.001, 0.001, 0.001]
    initial_accel_bias_sigmas:
      type: double_array
      default_value: [0.01, 0.01, 0.01]
    initial_gyro_bias_sigmas:
      type: double_array
      default_value: [0.001, 0.001, 0.001]

  # --- Experimental Features ---
  experimental:
    enable_dvl_preintegration:
      type: bool
      default_value: false
    enable_pseudo_dvl_w_imu:
      type: bool
      default_value: false
